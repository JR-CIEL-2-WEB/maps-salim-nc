<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>JRostand stade reperes</title>
    <link rel="stylesheet" type="text/css" href="./style.css" />
</head>

<body>

    <h1>JRostand Reperes Stade</h1>
    <hr>
    <div id="map">...</div>

<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA7Y32T_PJHZxYcK3BJYJFNwSl6cuvLXpo&callback=loadDoc&v=weekly"
  defer
></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
  var markers; 

  // Appel automatique par la Google Maps API
  function loadDoc() {
    $.ajax({
      url: "markersJrostand.json",         
      method: "GET",                       
      dataType: "json",                    

      success: function (data) {
        markers = data;                

        
        for (let i = 0; i < markers.length; i++) {
          let marker = markers[i];
          for (let key in marker) {
            console.log(key + " : " + marker[key]);
          }
          console.log("___________");
        }

        initMap(markers);
      }
    });
  }

 
  function initMap(markers) {
    var options = {
      center: new google.maps.LatLng(48.95930033308523, 2.5477890651742516),
      zoom: 15,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("map"), options);

    for (let i = 0; i < markers.length; i++) {
      let coord = markers[i];

      let marker = new google.maps.Marker({
        position: coord,
        map: map
      });

     
      google.maps.event.addListener(marker, "click", function () {
        alert("Vous avez cliquÃ© sur le marqueur " + (i + 1));
      });
    }
  }



</script>


</body>

</html>